<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Happy Birthday, Sol!</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
/* (keeping user's styles) */
body { font-family: 'Lora', serif; color: #EAE6E0; background-color: #0c1424; overflow-x: hidden; }
.font-cinzel { font-family: 'Cinzel', serif; }
.animated-gradient { background: linear-gradient(-45deg, #0a192f, #172a46, #223c63, #1e5288); background-size: 400% 400%; animation: gradientBG 25s ease infinite; }
@keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.particle { position: absolute; background: white; border-radius: 50%; opacity: 0; animation: float 15s infinite linear; }
@keyframes float { 0% { transform: translateY(0); opacity: 0; } 10%, 90% { opacity: 0.7; } 100% { transform: translateY(-100vh); opacity: 0; } }
.character-card { background-color: rgba(23, 42, 70, 0.5); border: 1px solid rgba(255, 215, 0, 0.3); backdrop-filter: blur(10px); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; }
.character-card:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 0 25px rgba(255, 215, 0, 0.5); }
.scroll-fade { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
.scroll-fade.visible { opacity: 1; transform: translateY(0); }
.text-gold { color: #FFD700; }
.modal { transition: opacity 0.3s ease; }
.modal-content { transition: transform 0.3s ease; }
</style>
</head>
<body class="animated-gradient">
<div id="loading-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-90 cursor-pointer transition-opacity duration-1000">
  <div id="particle-container" class="absolute inset-0"></div>
  <div class="text-center">
    <h1 class="font-cinzel text-3xl md:text-5xl text-gold tracking-widest">Loading...</h1>
    <p class="mt-4 text-lg text-gray-300">Click anywhere to enter</p>
  </div>
  <div id="loading-bar-container" class="w-1/2 md:w-1/3 mt-8 bg-gray-700 rounded-full h-2.5">
    <div id="loading-bar" class="bg-gold h-2.5 rounded-full" style="width: 0%"></div>
  </div>
</div>

<main id="main-content" class="opacity-0 transition-opacity duration-1000 relative">
<button id="mute-btn" class="fixed top-4 right-4 bg-gray-800 text-white px-3 py-2 rounded-full shadow-lg hover:bg-gray-600 transition z-20">
    üîá Mute
</button>
  
  <audio id="bg-audio" src="assets/audio/aria_theme.mp3" loop preload="auto"></audio>
  <audio id="effect-audio" src="assets/audio/celebrate.mp3" preload="auto"></audio>

  <section class="min-h-screen flex flex-col items-center justify-center text-center p-4 relative">
    <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: radial-gradient(circle, rgba(23, 42, 70, 0.5) 0%, rgba(10, 25, 47, 0.8) 100%);"></div>
      <div id="main-particle-container" class="absolute inset-0"></div>
    <div class="z-10">
      <h1 class="font-cinzel text-5xl md:text-8xl font-bold text-gold animate-pulse">Happy Birthday, Sol!</h1>
      <p class="mt-6 text-xl md:text-2xl text-gray-200">From your annoying but amazing friend, Nate üòå‚ú®</p>
    </div>
    <div class="absolute bottom-10 text-gold animate-bounce"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></div>
  </section>

  <section class="py-20 px-4 md:px-10">
    <div class="max-w-6xl mx-auto text-center">
      <h2 class="font-cinzel text-4xl text-gold mb-12 scroll-fade">A Few Familiar Faces...</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="character-card rounded-lg p-6 scroll-fade" data-character="Elysia">
          <img src="https://i.pinimg.com/474x/51/d4/4a/51d44a22bb51edc121fa541439dea2c4.jpg" alt="Elysia" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-gold pointer-events-none object-cover">
          <h3 class="font-cinzel text-2xl text-white pointer-events-none">Elysia</h3>
          <p class="text-gray-300 italic mt-2 pointer-events-none">"Click me for a message~"</p>
        </div>
        <div class="character-card rounded-lg p-6 scroll-fade" style="transition-delay: 0.2s;" data-character="Phainon">
          <img src="https://i.pinimg.com/736x/c4/86/21/c486219125dd15a04b274b62ebec344f.jpg" alt="Phainon" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-gold pointer-events-none object-cover">
          <h3 class="font-cinzel text-2xl text-white pointer-events-none">Phainon</h3>
          <p class="text-gray-300 italic mt-2 pointer-events-none">"Click me for a message~"</p>
        </div>
        <div class="character-card rounded-lg p-6 scroll-fade" style="transition-delay: 0.4s;" data-character="Kiana Kaslana">
          <img src="https://i.pinimg.com/474x/d5/fb/52/d5fb524efb039ae77c06c09b8a7d85b5.jpg" alt="Kiana Kaslana" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-gold object-cover pointer-events-none">
          <h3 class="font-cinzel text-2xl text-white pointer-events-none">Kiana Kaslana</h3>
          <p class="text-gray-300 italic mt-2 pointer-events-none">"Click me for a message~"</p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 px-4 md:px-10">
    <div class="max-w-3xl mx-auto text-left scroll-fade">
      <h2 class="font-cinzel text-4xl text-gold mb-8 text-center">Version 19.0 - "Sol Invictus" Update</h2>
      <div class="bg-black bg-opacity-30 p-6 rounded-lg border border-gold/30 space-y-4">
        <p><span class="text-green-400">[BUFF]</span> Charisma stat increased by +20%.</p>
        <p><span class="text-green-400">[BUFF]</span> Luck stat permanently increased for all gacha pulls.</p>
        <p><span class="text-blue-400">[NEW FEATURE]</span> Unlocked the "Future is Bright" skill tree.</p>
        <p><span class="text-yellow-400">[EVENT]</span> Birthday event now active. Rewards include cake, happiness, and good memories.</p>
        <p><span class="text-gray-400">[NOTE]</span> "Annoying but amazing friend" support character (Nate) remains permanently in the party.</p>
      </div>
    </div>
  </section>

  <section class="py-20 px-4 md:px-10">
    <div class="max-w-3xl mx-auto text-center scroll-fade">
      <h2 class="font-cinzel text-4xl text-gold mb-8">A Message For You</h2>
      <div class="bg-black bg-opacity-30 p-8 rounded-lg border border-gold/30">
        <p class="text-lg md:text-xl leading-relaxed">"Even if we fight or go silent, I‚Äôll always be here, so proud of the person you are. I love you, and I can‚Äôt wait to see how the future unfolds ‚Äî together, always."</p>
        <hr class="border-gold/30 my-8">
        <div id="poem-container" class="italic text-gray-300">
          <p>In the quiet between us,</p>
          <p>my heart keeps your light‚Äî</p>
          <p>you‚Äôre my constant, my sunrise,</p>
          <p>my laughter in the night.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 text-center px-4">
    <div class="scroll-fade">
      <h2 class="font-cinzel text-4xl text-gold mb-8">Claim Your Birthday Reward!</h2>
      <button id="confetti-button" class="font-cinzel text-xl bg-gold text-gray-900 font-bold py-4 px-8 rounded-lg shadow-lg hover:bg-yellow-300 transition-transform transform hover:scale-105">Celebrate!</button>
    </div>
  </section>

  <footer class="text-center p-4 text-gray-500"><p>Made with ‚ù§Ô∏è for the bestest friend.</p></footer>
</main>

<div id="message-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4 opacity-0 pointer-events-none">
  <div id="modal-content" class="modal-content bg-gray-800 border border-gold rounded-lg shadow-xl p-6 w-full max-w-md text-center transform scale-95">
    <h3 id="modal-character-name" class="font-cinzel text-2xl text-gold mb-4"></h3>
    <p id="modal-message" class="text-lg text-gray-200"></p>
    <button id="modal-close-btn" class="mt-6 font-cinzel text-md bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-500">Close</button>
  </div>
</div>

<div id="final-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 p-4 opacity-0 pointer-events-none">
  <div id="final-modal-content" class="modal-content bg-gray-900 border-2 border-yellow-300 rounded-lg shadow-2xl p-8 w-full max-w-lg text-center transform scale-95">
    <h3 class="font-cinzel text-3xl text-gold mb-6">One Last Thing...</h3>
    <p class="text-xl text-gray-200 leading-relaxed">
      For real though, beyond all the jokes and teasing, I hope you know how much you mean to me. Watching you grow and seeing the amazing person you are makes me incredibly proud. You deserve all the happiness in the world today and always. Happy Birthday, Sol. Here's to many more years of laughter and adventures together.
    </p>
    <button id="final-modal-close-btn" class="mt-8 font-cinzel text-lg bg-gold text-gray-900 font-bold py-2 px-6 rounded-lg hover:bg-yellow-300">Close</button>
  </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
  // Get all the elements we need to work with
  const loadingScreen = document.getElementById('loading-screen');
  const mainContent = document.getElementById('main-content');
  const confettiButton = document.getElementById('confetti-button');
  const loadingBar = document.getElementById('loading-bar');
  const characterCards = document.querySelectorAll('.character-card');
  const bgAudio = document.getElementById('bg-audio');
  const effectAudio = document.getElementById('effect-audio');
  const muteBtn = document.getElementById('mute-btn');

  // Character Modal elements
  const messageModal = document.getElementById('message-modal');
  const modalContent = document.getElementById('modal-content');
  const modalCharacterName = document.getElementById('modal-character-name');
  const modalMessage = document.getElementById('modal-message');
  const modalCloseBtn = document.getElementById('modal-close-btn');
  
  // NEW: Final Modal elements
  const finalModal = document.getElementById('final-modal');
  const finalModalContent = document.getElementById('final-modal-content');
  const finalModalCloseBtn = document.getElementById('final-modal-close-btn');

  let hasEntered = false;
  let isMuted = false;

  const characterMessages = {
    "Elysia": "Hi~ Another year, another reason to celebrate someone as wonderful as you! Happy Birthday, Sol. May your day be as bright and beautiful as a perfect crystal.",
    "Phainon": "The stage is set for a grand celebration. May this new act in your life be filled with legendary moments and resounding applause. Happy Birthday, Sol.",
    "Kiana Kaslana": "Hey! A birthday is a super important mission! Your objective: have the best day ever and eat lots of cake! I'll be cheering for you! Happy Birthday, Sol!"
  };

  // --- Character Modal Logic ---
  function openCharacterModal(character) {
    modalCharacterName.textContent = character;
    modalMessage.textContent = characterMessages[character] || "Have a wonderful birthday!";
    messageModal.classList.remove('opacity-0', 'pointer-events-none');
    modalContent.classList.remove('scale-95');
  }
  function closeCharacterModal() {
    messageModal.classList.add('opacity-0', 'pointer-events-none');
    modalContent.classList.add('scale-95');
  }
  modalCloseBtn.addEventListener('click', closeCharacterModal);
  messageModal.addEventListener('click', (e) => { if (e.target === messageModal) closeCharacterModal(); });
  characterCards.forEach(card => card.addEventListener('click', () => openCharacterModal(card.dataset.character)));
  
  // --- NEW: Final Modal Logic ---
  function openFinalModal() {
    finalModal.classList.remove('opacity-0', 'pointer-events-none');
    finalModalContent.classList.remove('scale-95');
  }
  function closeFinalModal() {
    finalModal.classList.add('opacity-0', 'pointer-events-none');
    finalModalContent.classList.add('scale-95');
  }
  finalModalCloseBtn.addEventListener('click', closeFinalModal);
  finalModal.addEventListener('click', (e) => { if (e.target === finalModal) closeFinalModal(); });

  // --- Particle Effect Logic ---
  function createParticles(containerId, count) {
    const container = document.getElementById(containerId);
    if (!container) return;
    for (let i = 0; i < count; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      const s = Math.random() * 3 + 1;
      p.style.width = `${s}px`; p.style.height = `${s}px`;
      p.style.left = `${Math.random() * 100}%`; p.style.top = `${Math.random() * 100}%`;
      p.style.animationDelay = `${Math.random() * 15}s`; p.style.animationDuration = `${Math.random() * 10 + 5}s`;
      container.appendChild(p);
    }
  }
  createParticles('particle-container', 50);
  createParticles('main-particle-container', 100);

  // --- Loading Screen Logic ---
  let progress = 0;
  const loadingInterval = setInterval(() => {
    progress += Math.random() * 10;
    if (progress > 100) { progress = 100; clearInterval(loadingInterval); }
    loadingBar.style.width = progress + '%';
  }, 200);

  function enterSite() {
    if (hasEntered) return;
    hasEntered = true;
    loadingScreen.style.opacity = '0';
    setTimeout(() => { loadingScreen.style.display = 'none'; }, 1000);
    mainContent.style.opacity = '1';
    bgAudio.play().catch(()=>{});
  }
  loadingScreen.addEventListener('click', enterSite);

  // --- Confetti Button and Audio Effect Logic ---
  confettiButton.addEventListener('click', () => {
    // Confetti effect
    const duration = 5 * 1000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 100 }; // Ensure confetti is on top
    function randomInRange(min, max) { return Math.random() * (max - min) + min; }
    
    const interval = setInterval(() => {
      const timeLeft = animationEnd - Date.now();
      if (timeLeft <= 0) return clearInterval(interval);
      const particleCount = 50 * (timeLeft / duration);
      confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
      confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
    }, 250);
    
    bgAudio.pause();
    effectAudio.currentTime = 0;
    effectAudio.play().catch(()=>{});
    
    // NEW: Open the final modal after a short delay
    setTimeout(() => {
        openFinalModal();
    }, 1500); // 1.5 second delay for a nice effect
  });

  // --- Mute/Unmute Button Logic ---
  muteBtn.addEventListener('click', () => {
    isMuted = !isMuted;
    bgAudio.muted = isMuted;
    effectAudio.muted = isMuted;
    muteBtn.textContent = isMuted ? 'üîä Unmute' : 'üîá Mute';
  });

  // --- Scroll Fade-in Logic ---
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { 
        if (entry.isIntersecting) {
            entry.target.classList.add('visible'); 
        }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.scroll-fade').forEach(el => observer.observe(el));
});
</script>

</body>
</html>